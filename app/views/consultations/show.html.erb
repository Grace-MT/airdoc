<h1>Consultation</h1>
<div class="jumbotron">
  <h3 class="display-8">
    <strong>Title: </strong><%= @consultation.pretty_title.capitalize %>
  </h3>
  <hr class="my-2">
  <p class="lead">
    <strong>Speciality:</strong> <i><%= @consultation.speciality %></i><br>
    <strong>Experience(yrs):</strong> <i><%= @consultation.years_of_experience %></i><br>
    <strong>Languages:</strong> <i><%= @consultation.languages_spoken %></i><br>
    <strong>Availability:</strong> <i><%= @consultation.availability %></i><br>
    <strong>Location:</strong> <i><%= @consultation.location_city %></i><br>
    <strong>Price/hr:</strong> <i>Â£<%= @consultation.price_per_hour %></i><br>
    <strong>Duration(hrs):</strong> <i><%= @consultation.duration %></i>
  </p>
  <hr class="my-2">
  <br>
  <strong>Created at:</strong> <i><%= @consultation.created_at %></i>
  <hr class="my-2">
  <br>
  <div class="btns col-3 p-0">
    <%= link_to "Back", consultations_path, class: "btn btn-primary" %>
    <%= button_to "Delete", @consultation, method: :delete, class: 'btn btn-danger'%>
  </div>
</div>


<div id="appointments">
  <h3 class="mt-4 appointment-list">Appointments</h3>
  <table class="table table-striped table-bordered table-striped">
    <thead>
      <tr class="thead-dark">
        <th>Patient</th>
        <th>Email</th>
        <th>Status</th>
        <th>Created at</th>
      </tr>
      <% @appointments.each do |appointment|%>
        <% patien_name = "#{appointment.user.first_name.capitalize} #{appointment.user.last_name.capitalize}"%>
        <tr>
          <td><%= patien_name %></td>
          <td><%= appointment.user.email %></td>
          <td><%= appointment.status %></td>
          <td><%= appointment.created_at %></td>
          <td><%=link_to 'delete', appointment_path(appointment), data: { turbo_method: :delete }, class: 'btn btn-danger'%></td>
        </tr>
      <% end %>
    </thead>
  </table>
</div>

<div data-controller="toggle">
    <button data-action="click->toggle#fire" class="btn btn-success mx-5 mb-5"> Add appointment </button>

    <div class=" form-open" data-toggle-target="appForm">
      <%= render "appointments/form" %>
    </div>
</div>
